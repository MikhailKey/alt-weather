(this["webpackJsonpalt-weather"]=this["webpackJsonpalt-weather"]||[]).push([[0],{114:function(e,t,a){e.exports=a(164)},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),i=a(54),l=a.n(i),s=r.a.createContext(),u=a(17),m=a.n(u),d=a(102),p=a(22),f=a(13),h=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(f.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(!1),d=Object(f.a)(u,2),h=d[0],E=d[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(p.a)(m.a.mark((function e(t){var a,n,c,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,r(!0),c=null,e.next=6,l()({url:t,method:a,data:n}).then((function(e){r(!1),E(!0),c=e.data})).catch((function(e){console.error(e.response.data),r(!1),s(e.response.data)}));case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:function(){s(""),E(!1)},success:h}},E=a(203),b=a(201),g=a(202),v=a(206),y=a(199),x=a(204),O=a(207),j=a(49),w=a(205),C=a(219),N=a(221),k=Object(y.a)({root:{maxWidth:345},media:{height:140}}),S=function(e){var t=e.handleOpen,a=e.city,c=Object(n.useState)({country:"",name:"",coordinates:{},temperature:"",temp_min:"",temp_max:"",weather:{}}),o=Object(f.a)(c,2),i=o[0],l=o[1],u=k(),d=Object(n.useContext)(s).key,y=h(),S=y.request,_=y.loading,D=y.error,F=function(){Object.keys(i).length&&t(i)},I=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("weather?q=".concat(a,"&units=metric&appid=").concat(d),"get");case 2:(t=e.sent)&&(n={name:"".concat(t.name,", ").concat(t.sys.country),coordinates:t.coord,temperature:t.main.temp.toFixed(0),temp_min:t.main.temp_min.toFixed(0),temp_max:t.main.temp_max.toFixed(0),weather:t.weather},l(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){I()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:u.root},r.a.createElement(g.a,{onClick:F},_?r.a.createElement(E.a,{variant:"rect",width:"100%",height:200}):r.a.createElement(x.a,null,r.a.createElement(j.a,{gutterBottom:!0,variant:"h5",component:"h2"},i.name),r.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Day ",i.temp_max,"\xb0C - Night ",i.temp_min,"\xb0C"),r.a.createElement(w.a,{className:u.main},r.a.createElement(j.a,{variant:"h2",color:"textSecondary"},i.temperature,"\xb0C"),r.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},i.weather.description)))),r.a.createElement(v.a,null,r.a.createElement(O.a,{onClick:F,size:"small",color:"primary"},"More"))),r.a.createElement(N.a,{open:!!D,autoHideDuration:2500,anchorOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement(C.a,{severity:"error"},"An error occurred, please try again later")))},_=a(27),D=a(96),F=a.n(D),I=(a(140),a(97)),z=a.n(I),L=a(98),R=a.n(L),q=a(99),M=a.n(q),T=function(e){var t=e.description,a=e.day,n=void 0===a?"sunny":a;return"Clear"===t?n?r.a.createElement("div",{className:"Clear"},r.a.createElement("i",{className:"fas fa-sun"})):r.a.createElement("div",{className:"night"},r.a.createElement("i",{className:"fas fa-moon"})):"Drizzle"===t?r.a.createElement("div",{className:"Drizzle"},r.a.createElement("i",{className:"fas fa-cloud-rain"})):"Rain"===t?r.a.createElement("div",{className:"Rain"},r.a.createElement("i",{className:"fas fa-cloud-showers-heavy"})):"Thunderstorm"===t?r.a.createElement("div",{className:"Thunderstorm"},r.a.createElement("i",{className:"fas fa-cloud-showers-heavy"})):"Clouds"===t?n?r.a.createElement("div",{className:"Clouds-morning"},r.a.createElement("i",{className:"fas fa-cloud"})):r.a.createElement("div",{className:t},r.a.createElement("i",{className:"fas fa-cloud"})):r.a.createElement("div",{className:t},r.a.createElement("i",{className:"fas fa-smog"}))},B=a(222),W=a(208),H=a(209),J=function(e){var t=e.day,a=Object(n.useState)({}),c=Object(f.a)(a,2),o=c[0],i=c[1],l=function(){_.extend(F.a),_.extend(R.a),_.extend(M.a),_.extend(z.a),_.locale("en");return{formatDate:function(e){return _.unix(e).format("ddd, MMM-DD")}}}().formatDate;return Object(n.useEffect)((function(){t.dt&&i({min:t.temp.min.toFixed(0),max:t.temp.max.toFixed(0),description:t.weather[0].description,icon:t.weather[0].main})}),[t]),r.a.createElement(B.a,{role:void 0,dense:!0,button:!0},t.dt?r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(T,{description:o.icon})),r.a.createElement(H.a,{primary:"".concat(l(t.dt),", ")+o.max+"/"+o.min+"\xb0C",secondary:o.description})):null)},P=a(214),A=a(213),U=a(218),Y=a(215),G=a(212),K=a(211),Q=a(210),V=a(62),X=function(e){var t=e.handleClose,a=e.open,c=e.city,o=Object(V.a)(),i=Object(Q.a)(o.breakpoints.down("sm")),l=h(),u=l.request,d=l.loading,b=(l.error,Object(n.useContext)(s).key),g=Object(n.useState)({current:{temperature:0,temp_min:0,temp_max:0},daily:{}}),v=Object(f.a)(g,2),y=v[0],x=v[1],C=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("onecall?lat=".concat(c.coordinates.lat,"&lon=").concat(c.coordinates.lon,"&exclude=hourly,minutely&units=metric&appid=").concat(b),"get");case 2:(t=e.sent)&&x({daily:t.daily.slice(1,t.daily.length),current:c});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c.name&&C()}),[c]),r.a.createElement("div",null,r.a.createElement(U.a,{fullWidth:!0,maxWidth:"sm",fullScreen:i,open:a,onClose:t},r.a.createElement(K.a,null,c.name),r.a.createElement(G.a,null,d?r.a.createElement(E.a,{width:"100%",height:700}):r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,null,r.a.createElement(j.a,{variant:"h2",color:"textSecondary"},y.current.temperature,"\xb0C"),r.a.createElement(j.a,{variant:"subtitle1",color:"textSecondary"},"Day ",y.current.temp_max,"\xb0C - Night ",y.current.temp_min,"\xb0C")),r.a.createElement(A.a,null),r.a.createElement(w.a,null,r.a.createElement(j.a,{variant:"h5"},"7-day forecast"),r.a.createElement(P.a,null,y.daily.length?y.daily.map((function(e){return r.a.createElement(J,{key:e.dt,day:e})})):null)))),r.a.createElement(Y.a,null,r.a.createElement(O.a,{autoFocus:!0,onClick:t,color:"primary"},"Close"))))},Z=a(71),$=a(101),ee=a.n($),te=a(11),ae=a(220),ne=a(100),re=a.n(ne),ce=ee()((function(e){return{search:Object(Z.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(te.c)(e.palette.primary.light,.15),"&:hover":{backgroundColor:Object(te.c)(e.palette.primary.light,.25)},marginLeft:0,marginBottom:e.spacing(1)},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Z.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),confirmForm:{display:"flex",alignItems:"flex-start"}}}))((function(e){var t=e.classes,a=e.onChange,c=Object(n.useState)(""),o=Object(f.a)(c,2),i=o[0],l=o[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(i)},className:t.confirmForm},r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(re.a,null)),r.a.createElement(ae.a,{placeholder:"\u041f\u043e\u0438\u0441\u043a...",onChange:function(e){return l(e.target.value)},classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"\u043f\u043e\u0438\u0441\u043a"}})),r.a.createElement(O.a,{type:"submit"},"Search"))})),oe=a(216),ie=a(217),le=Object(y.a)((function(e){return{container:{paddingTop:e.spacing(25)},searchTool:{display:"flex",justifyContent:"space-between"}}})),se=function(){var e=le(),t=Object(n.useState)(!1),a=Object(f.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),l=Object(f.a)(i,2),u=l[0],E=l[1],b=Object(n.useState)({}),g=Object(f.a)(b,2),v=g[0],y=g[1],x=h(),O=x.request,j=x.error,k=Object(n.useContext)(s).key,_=Object(n.useState)(["Moscow","London","New York","Beijing"]),D=Object(f.a)(_,2),F=D[0],I=D[1],z=function(e){y(e),o(!0)},L=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("weather?q=".concat(t,"&units=metric&appid=").concat(k),"get");case 2:if(!e.sent){e.next=9;break}if(!(F.findIndex((function(e){return e.toLowerCase()===t.toLowerCase()}))+1)){e.next=7;break}return e.abrupt("return");case 7:a=[].concat(Object(d.a)(F),[t]),I(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){u&&L(u)}),[u]);return r.a.createElement(w.a,null,r.a.createElement(X,{city:v,open:c,handleClose:function(){o(!1)}}),r.a.createElement(oe.a,{maxWidth:"md",className:e.container},r.a.createElement(ie.a,{className:e.searchTool},r.a.createElement(ce,{onChange:E})),r.a.createElement(w.a,{container:!0,spacing:2},F.map((function(e){return r.a.createElement(w.a,{key:e,item:!0,xs:12,sm:6,md:3},r.a.createElement(S,{city:e,handleOpen:z}))})))),r.a.createElement(N.a,{open:!!j,autoHideDuration:2500,anchorOrigin:{vertical:"bottom",horizontal:"right"}},r.a.createElement(C.a,{severity:"error"},j.message)))};var ue=function(){return l.a.defaults.baseURL="https://api.openweathermap.org/data/2.5/",r.a.createElement(s.Provider,{value:{key:"433b880a1dcad0ae0eb12634ab640f6b"}},r.a.createElement(se,null))};a(163);o.a.render(r.a.createElement(ue,null),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.328b1009.chunk.js.map